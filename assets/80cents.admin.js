/**
 * 80cents - A real and easy NodeJS service for create ecommerce platforms.
 * @version v0.4.24
 * @link    http://zetapath.com
 * @author  Javi Jimenez ()
 * @license 
 */
(function(){"use strict";var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};__.scaffold={},__["const"]={},Atoms.$(function(){var page;return Atoms.Url.options.absolute=!0,page=Atoms.$("body").attr("data-page"),"session"===page&&(new Atoms.Organism.Session,__.Dialog.Session[__.owner?"login":"signup"]()),"admin"===page?(new Atoms.Organism.Menu,new Atoms.Organism.Content,new Atoms.Organism.Profile):void 0}),window.__=window.__||{},__.proxy=function(type,method,parameters,background){var content_type,promise,token;return null==parameters&&(parameters={}),null==background&&(background=!1),promise=new Hope.Promise,background||__.Dialog.Loading.show(),("POST"===type||"PUT"===type)&&(parameters=JSON.stringify(parameters),content_type="application/json"),token="undefined"!=typeof session&&null!==session?session.token:null,$.ajax({url:__.host+"api/"+method,type:type,data:parameters,dataType:"json",contentType:content_type,success:function(xhr){return background||__.Dialog.Loading.hide(),promise.done(null,xhr)},error:function(_this){return function(xhr,response){var error;return background||__.Dialog.Loading.hide(),error={code:xhr.status,message:xhr.responseJSON.message},promise.done(error,null)}}(this)}),promise},__["const"].currency=[{value:"USD",label:"United States Dollars (USD)"},{value:"EUR",label:"Euro (EUR)"},{value:"GBP",label:"United Kingdom Pounds (GBP)"},{value:"CAD",label:"Canadian Dollars (CAD)"},{value:"ALL",label:"Albanian Lek (ALL)"},{value:"DZD",label:"Algerian Dinar (DZD)"},{value:"AOA",label:"Angolan Kwanza (AOA)"},{value:"ARS",label:"Argentine Pesos (ARS)"},{value:"AMD",label:"Armenian Dram (AMD)"},{value:"AWG",label:"Aruban Florin (AWG)"},{value:"AUD",label:"Australian Dollars (AUD)"},{value:"BBD",label:"Barbadian Dollar (BBD)"},{value:"AZN",label:"Azerbaijani Manat (AZN)"},{value:"BDT",label:"Bangladesh Taka (BDT)"},{value:"BSD",label:"Bahamian Dollar (BSD)"},{value:"BHD",label:"Bahraini Dinar (BHD)"},{value:"BYR",label:"Belarusian Ruble (BYR)"},{value:"BZD",label:"Belize Dollar (BZD)"},{value:"BTN",label:"Bhutanese Ngultrum (BTN)"},{value:"BAM",label:"Bosnia and Herzegovina Convertible Mark (BAM)"},{value:"BRL",label:"Brazilian Real (BRL)"},{value:"BOB",label:"Bolivian Boliviano (BOB)"},{value:"BWP",label:"Botswana Pula (BWP)"},{value:"BND",label:"Brunei Dollar (BND)"},{value:"BGN",label:"Bulgarian Lev (BGN)"},{value:"MMK",label:"Burmese Kyat (MMK)"},{value:"KHR",label:"Cambodian Riel"},{value:"KYD",label:"Cayman Dollars (KYD)"},{value:"XAF",label:"Central African CFA Franc (XAF)"},{value:"CLP",label:"Chilean Peso (CLP)"},{value:"CNY",label:"Chinese Yuan Renminbi (CNY)"},{value:"COP",label:"Colombian Peso (COP)"},{value:"CRC",label:"Costa Rican Colones (CRC)"},{value:"HRK",label:"Croatian Kuna (HRK)"},{value:"CZK",label:"Czech Koruny (CZK)"},{value:"DKK",label:"Danish Kroner (DKK)"},{value:"DOP",label:"Dominican Peso (DOP)"},{value:"XCD",label:"East Caribbean Dollar (XCD)"},{value:"EGP",label:"Egyptian Pound (EGP)"},{value:"ETB",label:"Ethiopian Birr (ETB)"},{value:"XPF",label:"CFP Franc (XPF)"},{value:"FJD",label:"Fijian Dollars (FJD)"},{value:"GMD",label:"Gambian Dalasi (GMD)"},{value:"GHS",label:"Ghanaian Cedi (GHS)"},{value:"GTQ",label:"Guatemalan Quetzal (GTQ)"},{value:"GYD",label:"Guyanese Dollar (GYD)"},{value:"GEL",label:"Georgian Lari (GEL)"},{value:"HTG",label:"Haitian Gourde (HTG)"},{value:"HNL",label:"Honduran Lempira (HNL)"},{value:"HKD",label:"Hong Kong Dollars (HKD)"},{value:"HUF",label:"Hungarian Forint (HUF)"},{value:"ISK",label:"Icelandic Kronur (ISK)"},{value:"INR",label:"Indian Rupees (INR)"},{value:"IDR",label:"Indonesian Rupiah (IDR)"},{value:"ILS",label:"Israeli New Shekel (NIS)"},{value:"JMD",label:"Jamaican Dollars (JMD)"},{value:"JPY",label:"Japanese Yen (JPY)"},{value:"JEP",label:"Jersey Pound"},{value:"JOD",label:"Jordanian Dinar (JOD)"},{value:"KZT",label:"Kazakhstani Tenge (KZT)"},{value:"KES",label:"Kenyan Shilling (KES)"},{value:"KWD",label:"Kuwaiti Dinar (KWD)"},{value:"KGS",label:"Kyrgyzstani Som (KGS)"},{value:"LVL",label:"Latvian Lati (LVL)"},{value:"LBP",label:"Lebanese Pounds (LBP)"},{value:"LRD",label:"Liberian Dollar (LRD)"},{value:"LTL",label:"Lithuanian Litai (LTL)"},{value:"MGA",label:"Malagasy Ariary (MGA)"},{value:"MKD",label:"Macedonia Denar (MKD)"},{value:"MOP",label:"Macanese Pataca (MOP)"},{value:"MVR",label:"Maldivian Rufiyaa (MVR)"},{value:"MXN",label:"Mexican Pesos (MXN)"},{value:"MYR",label:"Malaysian Ringgits (MYR)"},{value:"MUR",label:"Mauritian Rupee (MUR)"},{value:"MDL",label:"Moldovan Leu (MDL)"},{value:"MAD",label:"Moroccan Dirham"},{value:"MNT",label:"Mongolian Tugrik"},{value:"MZN",label:"Mozambican Metical"},{value:"NAD",label:"Namibian Dollar"},{value:"NPR",label:"Nepalese Rupee (NPR)"},{value:"ANG",label:"Netherlands Antillean Guilder"},{value:"NZD",label:"New Zealand Dollars (NZD)"},{value:"NIO",label:"Nicaraguan Córdoba (NIO)"},{value:"NGN",label:"Nigerian Naira (NGN)"},{value:"NOK",label:"Norwegian Kroner (NOK)"},{value:"OMR",label:"Omani Rial (OMR)"},{value:"PKR",label:"Pakistani Rupee (PKR)"},{value:"PGK",label:"Papua New Guinean Kina (PGK)"},{value:"PYG",label:"Paraguayan Guarani (PYG)"},{value:"PEN",label:"Peruvian Nuevo Sol (PEN)"},{value:"PHP",label:"Philippine Peso (PHP)"},{value:"PLN",label:"Polish Zlotych (PLN)"},{value:"QAR",label:"Qatari Rial (QAR)"},{value:"RON",label:"Romanian Lei (RON)"},{value:"RUB",label:"Russian Rubles (RUB)"},{value:"RWF",label:"Rwandan Franc (RWF)"},{value:"WST",label:"Samoan Tala (WST)"},{value:"SAR",label:"Saudi Riyal (SAR)"},{value:"STD",label:"Sao Tome And Principe Dobra (STD)"},{value:"RSD",label:"Serbian dinar (RSD)"},{value:"SCR",label:"Seychellois Rupee (SCR)"},{value:"SGD",label:"Singapore Dollars (SGD)"},{value:"SYP",label:"Syrian Pound (SYP)"},{value:"ZAR",label:"South African Rand (ZAR)"},{value:"KRW",label:"South Korean Won (KRW)"},{value:"LKR",label:"Sri Lankan Rupees (LKR)"},{value:"SRD",label:"Surinamese Dollar (SRD)"},{value:"SEK",label:"Swedish Kronor (SEK)"},{value:"CHF",label:"Swiss Francs (CHF)"},{value:"TWD",label:"Taiwan Dollars (TWD)"},{value:"THB",label:"Thai baht (THB)"},{value:"TZS",label:"Tanzanian Shilling (TZS)"},{value:"TTD",label:"Trinidad and Tobago Dollars (TTD)"},{value:"TND",label:"Tunisian Dinar (TND)"},{value:"TRY",label:"Turkish Lira (TRY)"},{value:"TMT",label:"Turkmenistani Manat (TMT)"},{value:"UGX",label:"Ugandan Shilling (UGX)"},{value:"UAH",label:"Ukrainian Hryvnia (UAH)"},{value:"AED",label:"United Arab Emirates Dirham (AED)"},{value:"UYU",label:"Uruguayan Pesos (UYU)"},{value:"UZS",label:"Uzbekistan som (UZS)"},{value:"VUV",label:"Vanuatu Vatu (VUV)"},{value:"VEF",label:"Venezuelan Bolivares (VEF)"},{value:"VND",label:"Vietnamese đồng (VND)"},{value:"XOF",label:"West African CFA franc (XOF)"},{value:"ZMW",label:"Zambian Kwacha (ZMW)"}],__["const"].order={STATES:[{value:"",label:"State..."},{value:1,label:"Purchased"},{value:2,label:"Processed"},{value:3,label:"Sent"},{value:4,label:"Finished"}]},__["const"].timezone=[{value:"American Samoa",label:"(GMT-11:00) American Samoa"},{value:"International Date Line West",label:"(GMT-11:00) International Date Line West"},{value:"Midway Island",label:"(GMT-11:00) Midway Island"},{value:"Hawaii",label:"(GMT-10:00) Hawaii"},{value:"Alaska",label:"(GMT-09:00) Alaska"},{value:"Pacific Time (US / Canada)",label:"(GMT-08:00) Pacific Time (US / Canada)"},{value:"Tijuana",label:"(GMT-08:00) Tijuana"},{value:"Arizona",label:"(GMT-07:00) Arizona"},{value:"Chihuahua",label:"(GMT-07:00) Chihuahua"},{value:"Mazatlan",label:"(GMT-07:00) Mazatlan"},{value:"Mountain Time (US / Canada)",label:"(GMT-07:00) Mountain Time (US / Canada)"},{value:"Central America",label:"(GMT-06:00) Central America"},{value:"Central Time (US / Canada)",label:"(GMT-06:00) Central Time (US / Canada)"},{value:"Guadalajara",label:"(GMT-06:00) Guadalajara"},{value:"Mexico City",label:"(GMT-06:00) Mexico City"},{value:"Monterrey",label:"(GMT-06:00) Monterrey"},{value:"Saskatchewan",label:"(GMT-06:00) Saskatchewan"},{value:"Bogota",label:"(GMT-05:00) Bogota"},{value:"Eastern Time (US / Canada)",label:"(GMT-05:00) Eastern Time (US / Canada)"},{value:"Indiana (East)",label:"(GMT-05:00) Indiana (East)"},{value:"Lima",label:"(GMT-05:00) Lima"},{value:"Quito",label:"(GMT-05:00) Quito"},{value:"Caracas",label:"(GMT-04:30) Caracas"},{value:"Atlantic Time (Canada)",label:"(GMT-04:00) Atlantic Time (Canada)"},{value:"Georgetown",label:"(GMT-04:00) Georgetown"},{value:"La Paz",label:"(GMT-04:00) La Paz"},{value:"Santiago",label:"(GMT-04:00) Santiago"},{value:"Newfoundland",label:"(GMT-03:30) Newfoundland"},{value:"Brasilia",label:"(GMT-03:00) Brasilia"},{value:"Buenos Aires",label:"(GMT-03:00) Buenos Aires"},{value:"Greenland",label:"(GMT-03:00) Greenland"},{value:"Montevideo",label:"(GMT-03:00) Montevideo"},{value:"Mid-Atlantic",label:"(GMT-02:00) Mid-Atlantic"},{value:"Azores",label:"(GMT-01:00) Azores"},{value:"Cape Verde Is.",label:"(GMT-01:00) Cape Verde Is."},{value:"Casablanca",label:"(GMT+00:00) Casablanca"},{value:"Dublin",label:"(GMT+00:00) Dublin"},{value:"Edinburgh",label:"(GMT+00:00) Edinburgh"},{value:"Lisbon",label:"(GMT+00:00) Lisbon"},{value:"London",label:"(GMT+00:00) London"},{value:"Monrovia",label:"(GMT+00:00) Monrovia"},{value:"UTC",label:"(GMT+00:00) UTC"},{value:"Amsterdam",label:"(GMT+01:00) Amsterdam"},{value:"Belgrade",label:"(GMT+01:00) Belgrade"},{value:"Berlin",label:"(GMT+01:00) Berlin"},{value:"Bern",label:"(GMT+01:00) Bern"},{value:"Bratislava",label:"(GMT+01:00) Bratislava"},{value:"Brussels",label:"(GMT+01:00) Brussels"},{value:"Budapest",label:"(GMT+01:00) Budapest"},{value:"Copenhagen",label:"(GMT+01:00) Copenhagen"},{value:"Ljubljana",label:"(GMT+01:00) Ljubljana"},{value:"Madrid",label:"(GMT+01:00) Madrid"},{value:"Paris",label:"(GMT+01:00) Paris"},{value:"Prague",label:"(GMT+01:00) Prague"},{value:"Rome",label:"(GMT+01:00) Rome"},{value:"Sarajevo",label:"(GMT+01:00) Sarajevo"},{value:"Skopje",label:"(GMT+01:00) Skopje"},{value:"Stockholm",label:"(GMT+01:00) Stockholm"},{value:"Vienna",label:"(GMT+01:00) Vienna"},{value:"Warsaw",label:"(GMT+01:00) Warsaw"},{value:"West Central Africa",label:"(GMT+01:00) West Central Africa"},{value:"Zagreb",label:"(GMT+01:00) Zagreb"},{value:"Athens",label:"(GMT+02:00) Athens"},{value:"Bucharest",label:"(GMT+02:00) Bucharest"},{value:"Cairo",label:"(GMT+02:00) Cairo"},{value:"Harare",label:"(GMT+02:00) Harare"},{value:"Helsinki",label:"(GMT+02:00) Helsinki"},{value:"Istanbul",label:"(GMT+02:00) Istanbul"},{value:"Jerusalem",label:"(GMT+02:00) Jerusalem"},{value:"Kyiv",label:"(GMT+02:00) Kyiv"},{value:"Pretoria",label:"(GMT+02:00) Pretoria"},{value:"Riga",label:"(GMT+02:00) Riga"},{value:"Sofia",label:"(GMT+02:00) Sofia"},{value:"Tallinn",label:"(GMT+02:00) Tallinn"},{value:"Vilnius",label:"(GMT+02:00) Vilnius"},{value:"Baghdad",label:"(GMT+03:00) Baghdad"},{value:"Kuwait",label:"(GMT+03:00) Kuwait"},{value:"Minsk",label:"(GMT+03:00) Minsk"},{value:"Moscow",label:"(GMT+03:00) Moscow"},{value:"Nairobi",label:"(GMT+03:00) Nairobi"},{value:"Riyadh",label:"(GMT+03:00) Riyadh"},{value:"St. Petersburg",label:"(GMT+03:00) St. Petersburg"},{value:"Volgograd",label:"(GMT+03:00) Volgograd"},{value:"Tehran",label:"(GMT+03:30) Tehran"},{value:"Abu Dhabi",label:"(GMT+04:00) Abu Dhabi"},{value:"Baku",label:"(GMT+04:00) Baku"},{value:"Muscat",label:"(GMT+04:00) Muscat"},{value:"Tbilisi",label:"(GMT+04:00) Tbilisi"},{value:"Yerevan",label:"(GMT+04:00) Yerevan"},{value:"Kabul",label:"(GMT+04:30) Kabul"},{value:"Ekaterinburg",label:"(GMT+05:00) Ekaterinburg"},{value:"Islamabad",label:"(GMT+05:00) Islamabad"},{value:"Karachi",label:"(GMT+05:00) Karachi"},{value:"Tashkent",label:"(GMT+05:00) Tashkent"},{value:"Chennai",label:"(GMT+05:30) Chennai"},{value:"Kolkata",label:"(GMT+05:30) Kolkata"},{value:"Mumbai",label:"(GMT+05:30) Mumbai"},{value:"New Delhi",label:"(GMT+05:30) New Delhi"},{value:"Sri Jayawardenepura",label:"(GMT+05:30) Sri Jayawardenepura"},{value:"Kathmandu",label:"(GMT+05:45) Kathmandu"},{value:"Almaty",label:"(GMT+06:00) Almaty"},{value:"Astana",label:"(GMT+06:00) Astana"},{value:"Dhaka",label:"(GMT+06:00) Dhaka"},{value:"Novosibirsk",label:"(GMT+06:00) Novosibirsk"},{value:"Urumqi",label:"(GMT+06:00) Urumqi"},{value:"Rangoon",label:"(GMT+06:30) Rangoon"},{value:"Bangkok",label:"(GMT+07:00) Bangkok"},{value:"Hanoi",label:"(GMT+07:00) Hanoi"},{value:"Jakarta",label:"(GMT+07:00) Jakarta"},{value:"Krasnoyarsk",label:"(GMT+07:00) Krasnoyarsk"},{value:"Beijing",label:"(GMT+08:00) Beijing"},{value:"Chongqing",label:"(GMT+08:00) Chongqing"},{value:"Hong Kong",label:"(GMT+08:00) Hong Kong"},{value:"Irkutsk",label:"(GMT+08:00) Irkutsk"},{value:"Kuala Lumpur",label:"(GMT+08:00) Kuala Lumpur"},{value:"Perth",label:"(GMT+08:00) Perth"},{value:"Singapore",label:"(GMT+08:00) Singapore"},{value:"Taipei",label:"(GMT+08:00) Taipei"},{value:"Ulaanbaatar",label:"(GMT+08:00) Ulaanbaatar"},{value:"Osaka",label:"(GMT+09:00) Osaka"},{value:"Sapporo",label:"(GMT+09:00) Sapporo"},{value:"Seoul",label:"(GMT+09:00) Seoul"},{value:"Tokyo",label:"(GMT+09:00) Tokyo"},{value:"Yakutsk",label:"(GMT+09:00) Yakutsk"},{value:"Adelaide",label:"(GMT+09:30) Adelaide"},{value:"Darwin",label:"(GMT+09:30) Darwin"},{value:"Brisbane",label:"(GMT+10:00) Brisbane"},{value:"Canberra",label:"(GMT+10:00) Canberra"},{value:"Guam",label:"(GMT+10:00) Guam"},{value:"Hobart",label:"(GMT+10:00) Hobart"},{value:"Magadan",label:"(GMT+10:00) Magadan"},{value:"Melbourne",label:"(GMT+10:00) Melbourne"},{value:"Port Moresby",label:"(GMT+10:00) Port Moresby"},{value:"Sydney",label:"(GMT+10:00) Sydney"},{value:"Vladivostok",label:"(GMT+10:00) Vladivostok"},{value:"New Caledonia",label:"(GMT+11:00) New Caledonia"},{value:"Solomon Is.",label:"(GMT+11:00) Solomon Is."},{value:"Auckland",label:"(GMT+12:00) Auckland"},{value:"Fiji",label:"(GMT+12:00) Fiji"},{value:"Kamchatka",label:"(GMT+12:00) Kamchatka"},{value:"Marshall Is.",label:"(GMT+12:00) Marshall Is."},{value:"Wellington",label:"(GMT+12:00) Wellington"},{value:"Chatham Is.",label:"(GMT+12:45) Chatham Is."},{value:"Nuku'alofa",label:"(GMT+13:00) Nuku'alofa"},{value:"Samoa",label:"(GMT+13:00) Samoa"},{value:"Tokelau Is.",label:"(GMT+13:00) Tokelau Is."}],__["const"].unit_system=[{value:"imperial",label:"Imperial System"},{value:"metric",label:"Metric System"}],__["const"].weight_unit=[{value:"kg",label:"Kilogram (kg)"},{value:"g",label:"Gram (g)"}],__.multipart=function(type,url,parameters,callbacks){var formData,name,onLoadComplete,promise,value,xhr;null==callbacks&&(callbacks={}),promise=new Hope.Promise,formData=new FormData;for(name in parameters)value=parameters[name],formData.append(name,value);return xhr=new XMLHttpRequest,xhr.responseType="json",onLoadComplete=function(){return promise.done(null,this.response)},xhr.addEventListener("load",onLoadComplete,!1),callbacks.progress&&xhr.upload.addEventListener("progress",callbacks.progress,!1),callbacks.error&&xhr.addEventListener("error",callbacks.error,!1),callbacks.abort&&xhr.addEventListener("abort",callbacks.abort,!1),xhr.open("POST",url),xhr.send(formData),promise},__.scaffold.form_collection={endpoint:"collection",entity_name:"Collection",children:[{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Collection details"}},{"Atom.Text":{value:"Write a name and description for this collection."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{name:"id",style:"hidden"}},{"Atom.Label":{value:"Title"}},{"Atom.Input":{name:"title",placeholder:"e.g. Summer collection, Under $100, Staff picks",required:!0,events:["keyup"]}},{"Atom.Label":{value:"Description"}},{"Atom.Wysihtml5":{name:"description",id:"collection"}}]}},{"Atom.Label":{style:"anchor entity"}},{"Molecule.Div":{style:"entity",children:[{"Atom.Heading":{size:"h2",value:"Images"}},{"Atom.Text":{value:"Upload and edit images of this product. Drag to reorder images."}}]}},{"Molecule.Images":{style:"entity",id:"images"}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Search engines"}},{"Atom.Text":{value:"Set up the page title, meta description and handle. These help define how this product shows up on search engines."}}]}},{"Molecule.SearchEngine":{id:"search"}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Visibility"}},{"Atom.Text":{value:"Control whether this product can be seen."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{type:"checkbox",name:"visibility",checked:!1}},{"Atom.Label":{value:"Visible in store"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Navigation":{children:[{"Atom.Button":{style:"cancel",text:"Remove",callbacks:["onRemove"],disabled:!0}},{"Atom.Button":{style:"theme",text:"Save",callbacks:["onSave"]}}]}}]},__.scaffold.form_customer={endpoint:"customer",entity_name:"Customer",children:[{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Customer details"}},{"Atom.Text":{value:"..."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{name:"id",style:"hidden"}},{"Atom.Label":{style:"half",value:"First Name"}},{"Atom.Label":{style:"half",value:"Last Name"}},{"Atom.Input":{style:"half",name:"first_name"}},{"Atom.Input":{style:"half",name:"last_name"}},{"Atom.Label":{value:"Mail"}},{"Atom.Input":{name:"mail",disabled:!0}},{"Atom.Label":{value:"Avatar url"}},{"Atom.Input":{name:"avatar"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Orders"}},{"Atom.Text":{value:"List of orders."}}]}},{"Molecule.List":{events:["select"],callbacks:["onOrder"],bind:{entity:"__.Entity.Order",atom:"Atom.Li",events:["touch"],create:!0,update:!0,destroy:!0}}},{"Atom.Label":{style:"anchor"}},{"Molecule.Navigation":{id:"options",children:[{"Atom.Button":{id:"cancel",style:"cancel",text:"Deactivate",callbacks:["onRemove"],disabled:!0}},{"Atom.Button":{style:"theme",text:"Save",callbacks:["onSave"]}}]}}]},__.scaffold.form_discount={endpoint:"discount",entity_name:"Discount",children:[{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Discount details"}},{"Atom.Text":{value:"Define your type of discount for your products."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{name:"id",style:"hidden"}},{"Atom.Label":{value:"Coupon Code"}},{"Atom.Input":{name:"code",required:!0,events:["keyup"]}},{"Atom.Label":{value:"Description"}},{"Atom.Textarea":{name:"description"}},{"Atom.Label":{style:"half",value:"Percent of discount"}},{"Atom.Label":{style:"half",value:"Amount to discount"}},{"Atom.Input":{style:"half",name:"percent"}},{"Atom.Input":{style:"half",name:"amount"}}]},"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Specific"}},{"Atom.Text":{value:"You can define if discount is in a determinate collection or product."}}]}},{"Molecule.Form":{id:"general",children:[{"Atom.Label":{value:"Collection"}},{"Atom.Select":{style:"half",id:"collection",name:"collection_id",options:[]}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Visibility"}},{"Atom.Text":{value:"Control whether this product can be seen."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{type:"checkbox",name:"active"}},{"Atom.Label":{value:"Active"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Navigation":{children:[{"Atom.Button":{style:"theme",text:"Save",callbacks:["onSave"]}}]}}]},__.scaffold.form_order={endpoint:"order",entity_name:"Order",children:[{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Order details"}},{"Atom.Text":{value:"Write a name and description for this collection."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{style:"hidden",name:"user"}},{"Atom.Label":{style:"half",value:"Id"}},{"Atom.Label":{style:"half",value:"Amount"}},{"Atom.Input":{style:"half",name:"id",disabled:!0}},{"Atom.Input":{style:"half big",name:"amount",disabled:!0}},{"Atom.Label":{value:"Comment"}},{"Atom.Textarea":{name:"comment"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Shipping & Billing"}},{"Atom.Text":{value:"Addresses for the order"}}]}},{"Molecule.Address":{id:"shipping",style:"half",title:"Shipping Contact"}},{"Molecule.Address":{id:"billing",style:"half",title:"Billing Contact"}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"State & Payment"}},{"Atom.Text":{value:"..."}}]}},{"Molecule.Form":{children:[{"Atom.Label":{style:"quarter",value:"State"}},{"Atom.Label":{style:"quarter",value:"Tracking Number"}},{"Atom.Label":{style:"quarter",value:"Type"}},{"Atom.Label":{style:"quarter",value:"Token"}},{"Atom.Select":{style:"quarter",name:"state",options:[{value:0,label:"Shopping"},{value:1,label:"Purchased"},{value:2,label:"Processed"},{value:3,label:"sent"},{value:4,label:"finished"}]}},{"Atom.Input":{style:"quarter",name:"tracking_number"}},{"Atom.Input":{style:"quarter",name:"payment_type",disabled:!0}},{"Atom.Input":{style:"quarter",name:"payment_token",disabled:!0}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Lines"}},{"Atom.Text":{value:"..."}}]}},{"Molecule.List":{events:["select"],callbacks:["onOrderLine"],bind:{entity:"__.Entity.OrderLine",atom:"Atom.Li",events:["touch"],create:!0,update:!0,destroy:!0}}},{"Atom.Label":{style:"anchor"}},{"Molecule.Navigation":{children:[{"Atom.Button":{style:"theme",text:"Save",callbacks:["onSave"]}}]}}]},__.scaffold.form_page={endpoint:"page",entity_name:"Page",children:[{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Page details"}},{"Atom.Text":{value:"Write a name and description for this page."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{name:"id",style:"hidden"}},{"Atom.Label":{value:"Title"}},{"Atom.Input":{name:"title",placeholder:"e.g. Summer page, Under $100, Staff picks",required:!0,events:["keyup"]}},{"Atom.Label":{value:"Content"}},{"Atom.Wysihtml5":{name:"content",id:"page"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Search engines"}},{"Atom.Text":{value:"Set up the page title, meta description and handle. These help define how this product shows up on search engines."}}]}},{"Molecule.SearchEngine":{id:"search"}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Visibility"}},{"Atom.Text":{value:"Control whether this product can be seen."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{type:"checkbox",name:"visibility"}},{"Atom.Label":{value:"Visible"}},{"Atom.Input":{type:"checkbox",name:"header"}},{"Atom.Label":{value:"Header menu"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Navigation":{children:[{"Atom.Button":{style:"cancel",text:"Remove",callbacks:["onRemove"],disabled:!0}},{"Atom.Button":{style:"theme",text:"Save",callbacks:["onSave"]}}]}}]},__.scaffold.form_payments={endpoint:"settings",entity_name:"Settings",children:[{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Paypal"}},{"Atom.Text":{value:"Your store accepts PayPal payments with PayPal Express Checkout. A PayPal button will display during checkout."}}]}},{"Molecule.Form":{id:"paypal",children:[{"Atom.Label":{style:"half",value:"Token"}},"Atom.Label",{"Atom.Input":{name:"token",required:!0,disabled:!0}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Stripe"}},{"Atom.Text":{value:"Settings."}}]}},{"Molecule.Form":{id:"stripe",children:[{"Atom.Label":{style:"half",value:"Secret Key"}},{"Atom.Label":{style:"half",value:"Publishable Key"}},{"Atom.Input":{style:"half",name:"secret_key",required:!0}},{"Atom.Input":{style:"half",name:"publishable_key",required:!0}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Navigation":{children:[{"Atom.Button":{style:"theme",text:"Save",callbacks:["onSave"]}}]}}]},__.scaffold.form_product={endpoint:"product",entity_name:"Product",children:[{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Product Details"}},{"Atom.Text":{value:"Write a name and description, and provide a type and vendor to categorize this product."}}]}},{"Molecule.Form":{id:"general",children:[{"Atom.Input":{name:"id",style:"hidden"}},{"Atom.Label":{value:"Title"}},{"Atom.Input":{name:"title",placeholder:"e.g. Unicorn crest short sleeve tee",required:!0,events:["keyup"]}},{"Atom.Label":{value:"Description"}},{"Atom.Wysihtml5":{name:"description",id:"product",required:!0,events:["keyup"]}},{"Atom.Label":{style:"half",value:"Collection"}},{"Atom.Label":{style:"half",value:"Vendor"}},{"Atom.Select":{style:"half",id:"collection",name:"collection_id",options:[]}},{"Atom.Input":{style:"half",name:"vendor",placeholder:"e.g. Apple, Shopify"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Inventory & variants"}},{"Atom.Text":{value:"Configure the options for selling this product."}}]}},{"Molecule.Form":{children:[{"Atom.Label":{style:"quarter",value:"Price"}},{"Atom.Label":{style:"quarter",value:"Compare at price"}},{"Atom.Label":{style:"quarter",value:"SKU"}},{"Atom.Label":{style:"quarter",value:"Barcode"}},{"Atom.Input":{style:"quarter",name:"price",placeholder:"0.00",required:!0,events:["keyup"]}},{"Atom.Input":{style:"quarter",name:"compare_at_price",placeholder:"0.00"}},{"Atom.Input":{style:"quarter",name:"stock",placeholder:"Stock Keeping Unit"}},{"Atom.Input":{style:"quarter margin-bottom",name:"barcode",placeholder:"e.g. UPC, ISBN"}},{"Atom.Label":{style:"quarter",value:"Weight"}},{"Atom.Label":{style:"quarter",value:"Sizes"}},{"Atom.Label":{style:"quarter",value:"Colors"}},{"Atom.Label":{style:"quarter",value:"Materials"}},{"Atom.Input":{style:"quarter",name:"weight",placeholder:"0.0"}},{"Atom.Input":{style:"quarter",name:"sizes",placeholder:"e.g. S, L, XL.."}},{"Atom.Input":{style:"quarter",name:"colors",placeholder:"e.g. blue, green"}},{"Atom.Input":{style:"quarter margin-bottom",name:"materials",placeholder:"e.g. nylon, cotton"}},{"Atom.Input":{type:"checkbox",name:"tax"}},{"Atom.Label":{value:"Charge taxes on this product"}},{"Atom.Input":{type:"checkbox",name:"requires_shipping"}},{"Atom.Label":{value:"Requires shipping (not needed for services or digital goods)"}}]}},{"Atom.Label":{style:"anchor"}},{"Atom.Label":{style:"anchor entity"}},{"Molecule.Div":{style:"entity",children:[{"Atom.Heading":{size:"h2",value:"Images"}},{"Atom.Text":{value:"Upload and edit images of this product. Drag to reorder images."}}]}},{"Molecule.Images":{style:"entity",id:"images"}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Tags"}},{"Atom.Text":{value:"Tags can be used to categorize products by properties like color, size, and material."}}]}},{"Molecule.Form":{children:[{"Atom.Label":{value:"Tags"}},{"Atom.Input":{name:"tags",placeholder:"vintage, cotton, summer"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Search engines"}},{"Atom.Text":{value:"Set up the page title, meta description and handle. These help define how this product shows up on search engines."}}]}},{"Molecule.SearchEngine":{id:"search"}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Visibility"}},{"Atom.Text":{value:"Control whether this product can be seen."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{type:"checkbox",name:"visibility"}},{"Atom.Label":{value:"Visible"}},{"Atom.Input":{type:"checkbox",name:"highlight"}},{"Atom.Label":{value:"Highlight in Home Page"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Navigation":{children:[{"Atom.Button":{style:"cancel",text:"Remove",callbacks:["onRemove"],disabled:!0}},{"Atom.Button":{style:"theme",text:"Save",callbacks:["onSave"]}}]}}]},__.scaffold.form_review={endpoint:"review",entity_name:"Review",children:[{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Review details"}},{"Atom.Text":{value:"Details of review."}}]}},{"Molecule.Form":{children:[{"Atom.Label":{style:"half",value:"Id"}},{"Atom.Label":{style:"half",value:"Product"}},{"Atom.Input":{style:"half",name:"id",disabled:!0}},{"Atom.Input":{style:"half big",name:"product",disabled:!0}},{"Atom.Label":{value:"Title"}},{"Atom.Input":{name:"title"}},{"Atom.Label":{value:"Description"}},{"Atom.Textarea":{name:"description"}},{"Atom.Label":{value:"Rating"}},{"Atom.Input":{type:"number",name:"rating"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Navigation":{children:[{"Atom.Button":{style:"cancel",text:"Remove",callbacks:["onRemove"],disabled:!0}},{"Atom.Button":{style:"theme",text:"Save",callbacks:["onSave"]}}]}}]},__.scaffold.form_settings={endpoint:"settings",entity_name:"Settings",children:[{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Settings details"}},{"Atom.Text":{value:"Edit your store information. The store name shows up on your storefront, while the title and meta description help define how your store shows up on search engines."}}]}},{"Molecule.Form":{children:[{"Atom.Input":{name:"id",style:"hidden"}},{"Atom.Label":{value:"Name"}},{"Atom.Input":{name:"name",required:!0}},{"Atom.Label":{value:"Homepage title (70 characters max)"}},{"Atom.Input":{name:"title",placeholder:"",required:!0}},{"Atom.Label":{value:"Homepage meta description"}},{"Atom.Textarea":{style:"margin-bottom anchor",name:"description",placeholder:"Enter a description to avoid ranking poorly on search engines like Google."}},{"Atom.Label":{style:"half",value:"Account email"}},{"Atom.Label":{style:"half",value:"Customer email"}},{"Atom.Input":{style:"half",name:"account_mail",required:!0,events:["keyup"]}},{"Atom.Input":{style:"half",name:"customer_mail"}},{"Atom.Label":{style:"half tip",value:"Email used for Shopio to contact you about your account"}},{"Atom.Label":{style:"half tip",value:"Your customers will see this when you email them (e.g.: order confirmations)"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Store address"}},{"Atom.Text":{value:"This address will appear on your invoices and will be used to calculate your shipping rates."}}]}},{"Molecule.Address":{id:"address",title:"Legal Name of Business"}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Social Networks"}},{"Atom.Text":{value:"Set you social networks links."}}]}},{"Molecule.Networks":{id:"networks"}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Standards & formats"}},{"Atom.Text":{value:"Standards and formats are used to calculate such things as product price, shipping weight and the time an order was placed."}}]}},{"Molecule.Form":{children:[{"Atom.Label":{value:"Language"}},{"Atom.Input":{name:"language"}},{"Atom.Label":{style:"half",value:"Timezone"}},{"Atom.Label":{style:"half",value:"Currency"}},{"Atom.Select":{style:"half",name:"timezone",options:__["const"].timezone}},{"Atom.Select":{style:"half",name:"currency",options:__["const"].currency}},{"Atom.Label":{style:"half",value:"Unit system"}},{"Atom.Label":{style:"half",value:"Weight Unit"}},{"Atom.Select":{style:"half",name:"unit_system",options:__["const"].unit_system}},{"Atom.Select":{style:"half",name:"weight_unit",options:__["const"].weight_unit}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Div":{children:[{"Atom.Heading":{size:"h2",value:"Google Analytics"}},{"Atom.Text":{value:"Google Analytics enables you to track the visitors to your store, and generates reports that will help you with your marketing."}}]}},{"Molecule.Form":{children:[{"Atom.Label":{value:"Google Analytics account"
}},{"Atom.Textarea":{name:"google_analytics",placeholder:"Paste your code from Google Here",style:"code"}}]}},{"Atom.Label":{style:"anchor"}},{"Molecule.Navigation":{children:[{"Atom.Button":{style:"theme",text:"Save",callbacks:["onSave"]}}]}}]},__.Entity.Collection=function(superClass){function Collection(){return Collection.__super__.constructor.apply(this,arguments)}return extend(Collection,superClass),Collection.fields("id","title","description","images","search","visibility","updated_at","created_at"),Collection.createOrUpdate=function(attributes){var entity;return entity=Collection.findBy("id",attributes.id),null!=entity?entity.updateAttributes(attributes):Collection.create(attributes)},Collection.prototype.parse=function(){return{style:"thumb "+(this.visibility?void 0:"offline"),image:__.host+"uploads/"+this.images[0],text:this.title,description:moment(this.created_at).fromNow()}},Collection}(Atoms.Class.Entity),__.Entity.Customer=function(superClass){function Customer(){return Customer.__super__.constructor.apply(this,arguments)}return extend(Customer,superClass),Customer.fields("id","mail","first_name","last_name","avatar","active","updated_at","created_at"),Customer.createOrUpdate=function(attributes){var entity;return entity=Customer.findBy("id",attributes.id),null!=entity?entity.updateAttributes(attributes):Customer.create(attributes)},Customer.prototype.parse=function(){return{style:this.active?"active":"banned",image:this.avatar||"/img/avatar.jpg",text:this.name,description:this.mail+(this.active?"":" - Banned"),info:moment(this.created_at).fromNow()}},Customer}(Atoms.Class.Entity),__.Entity.Discount=function(superClass){function Discount(){return Discount.__super__.constructor.apply(this,arguments)}return extend(Discount,superClass),Discount.fields("id","owner","code","description","percent","amount","active","collection_id","product","updated_at","created_at"),Discount.createOrUpdate=function(attributes){var entity;return entity=Discount.findBy("id",attributes.id),null!=entity?entity.updateAttributes(attributes):Discount.create(attributes)},Discount.prototype.parse=function(){return{text:this.code,description:this.description,info:moment(this.updated_at).fromNow()}},Discount}(Atoms.Class.Entity),__.Entity.Order=function(superClass){function Order(){return Order.__super__.constructor.apply(this,arguments)}return extend(Order,superClass),Order.fields("id","user","lines","amount","comment","shipping","billing","discount","discount_amount","payment_type","payment_token","tracking_number","state","lines","updated_at","created_at"),Order.createOrUpdate=function(attributes){var entity;return entity=Order.findBy("id",attributes.id),null!=entity?entity.updateAttributes(attributes):Order.create(attributes)},Order.prototype.parse=function(){return{text:this.id,description:this.lines.length+" products - "+this.amount,info:this.created_at}},Order}(Atoms.Class.Entity),__.Entity.OrderLine=function(superClass){function OrderLine(){return OrderLine.__super__.constructor.apply(this,arguments)}return extend(OrderLine,superClass),OrderLine.fields("id","order","product","amount","quantity","state","created_at"),OrderLine.createOrUpdate=function(attributes){var entity;return entity=OrderLine.findBy("id",attributes.id),null!=entity?entity.updateAttributes(attributes):OrderLine.create(attributes)},OrderLine.prototype.parse=function(){return{image:__.host+"uploads/"+this.product.default_image,text:this.product.title,description:this.amount,info:this.quantity+" units"}},OrderLine}(Atoms.Class.Entity),__.Entity.Page=function(superClass){function Page(){return Page.__super__.constructor.apply(this,arguments)}return extend(Page,superClass),Page.fields("id","title","content","search","header","visibility","updated_at","created_at"),Page.createOrUpdate=function(attributes){var entity;return entity=Page.findBy("id",attributes.id),null!=entity?entity.updateAttributes(attributes):Page.create(attributes)},Page.prototype.parse=function(){return{text:this.title,info:moment(this.updated_at).fromNow()}},Page}(Atoms.Class.Entity),__.Entity.Product=function(superClass){function Product(){return Product.__super__.constructor.apply(this,arguments)}return extend(Product,superClass),Product.fields("id","title","description","type","vendor","price","compare_at_price","stock","barcode","tax","requires_shipping","weight","sizes","colors","materials","default_image","images","collection_id","tags","search","visibility","highlight","updated_at","created_at"),Product.createOrUpdate=function(attributes){var entity;return entity=Product.findBy("id",attributes.id),null!=entity?entity.updateAttributes(attributes):Product.create(attributes)},Product.prototype.parse=function(){return{style:"thumb "+(this.visibility?"":"offline"),image:__.host+"uploads/"+this.default_image,text:this.title,description:moment(this.updated_at).fromNow(),info:this.price}},Product}(Atoms.Class.Entity),__.Entity.Review=function(superClass){function Review(){return Review.__super__.constructor.apply(this,arguments)}return extend(Review,superClass),Review.fields("id","user","product","title","description","rating","updated_at","created_at"),Review.createOrUpdate=function(attributes){var entity;return entity=Review.findBy("id",attributes.id),null!=entity?entity.updateAttributes(attributes):Review.create(attributes)},Review.prototype.parse=function(){return{image:__.host+"uploads/"+this.user.avatar,text:this.title,description:this.description,info:moment(this.created_at).fromNow()}},Review}(Atoms.Class.Entity),Atoms.Atom.Wysihtml5=function(superClass){function Wysihtml5(){var id;Wysihtml5.__super__.constructor.apply(this,arguments),id=this.attributes.id,this.editor=new wysihtml5.Editor("wysihtml5-"+id,{toolbar:"wysihtml5-toolbar-"+id}),this.textarea=this.el.siblings("textarea").first()}return extend(Wysihtml5,superClass),Wysihtml5.template='<nav id="wysihtml5-toolbar-{{id}}">\n  <a data-wysihtml5-command="bold"></a>\n  <a data-wysihtml5-command="italic"></a>\n  <a data-wysihtml5-command="insertUnorderedList"></a>\n  <a data-wysihtml5-command="insertOrderedList"></a>\n  <a data-wysihtml5-command="createLink"></a>\n  <div data-wysihtml5-dialog="createLink" style="display: none;">\n    <input data-wysihtml5-dialog-field="href" value="http://" class="text">\n    <a data-wysihtml5-dialog-action="save">OK</a><a data-wysihtml5-dialog-action="cancel">Cancel</a>\n  </div>\n  <a data-wysihtml5-command="insertImage"></a>\n  <div data-wysihtml5-dialog="insertImage" style="display: none;">\n    <input data-wysihtml5-dialog-field="src" value="http://">\n    <a data-wysihtml5-dialog-action="save">OK</a><a data-wysihtml5-dialog-action="cancel">Cancel</a>\n  </div>\n  <!--\n  <a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h1"></a>\n  <a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h2"></a>\n  -->\n</nav>\n<textarea id="wysihtml5-{{id}}" placeholder="{{placeholder}}">{{value}}</textarea>',Wysihtml5.prototype.value=function(data){return null!=data?this.editor.setValue(data,!1):this.textarea.val()},Wysihtml5}(Atoms.Atom.Textarea),Atoms.Molecule.Profile=function(superClass){function Profile(){Profile.__super__.constructor.apply(this,arguments),this.refresh(__.session)}return extend(Profile,superClass),Profile["extends"]=!0,Profile["default"]={children:[{"Atom.Figure":{id:"figure"}},{"Atom.Text":{id:"name",value:"Your name...",style:"small"}},{"Atom.Text":{id:"email",style:"tiny"}}]},Profile.prototype.refresh=function(data){return this.figure.refresh({url:"/uploads/"+data.avatar}),this.name.refresh({value:data.first_name}),this.email.refresh({value:data.mail})},Profile}(Atoms.Molecule.Div),Atoms.Molecule.Filter=function(superClass){function Filter(){return Filter.__super__.constructor.apply(this,arguments)}return extend(Filter,superClass),Filter["default"]={data:{flex:"horizontal grow","flex-items":"start","flex-content":"start"},children:[{"Atom.Input":{name:"title",placeholder:"title",events:["keyup"]}},{"Atom.Input":{name:"description",placeholder:"description",events:["keyup"],data:{"flex-grow":"max"}}},{"Atom.Input":{name:"min",type:"number",events:["keyup"],placeholder:"Min. price",data:{"flex-grow":"min"}}},{"Atom.Input":{name:"max",type:"number",events:["keyup"],placeholder:"Max. price",data:{"flex-grow":"min"}}},{"Atom.Label":{value:"visible"}},{"Atom.Switch":{name:"visible",placeholder:"Max. price",events:["change"]}}]},Filter}(Atoms.Molecule.Form),Atoms.Molecule.FilterOrder=function(superClass){function FilterOrder(){return FilterOrder.__super__.constructor.apply(this,arguments)}return extend(FilterOrder,superClass),FilterOrder["default"]={data:{flex:"horizontal grow","flex-items":"start","flex-content":"start"},children:[{"Atom.Input":{name:"id",placeholder:"id",events:["keyup"]}},{"Atom.Select":{name:"state",options:__["const"].order.STATES,value:"",events:["change"],data:{"flex-grow":"min"}}},{"Atom.Input":{name:"tracking",placeholder:"tracking number",events:["keyup"],data:{"flex-grow":"max"}}},{"Atom.Input":{name:"min",type:"number",events:["keyup"],placeholder:"Min. price",data:{"flex-grow":"min"}}},{"Atom.Input":{name:"max",type:"number",events:["keyup"],placeholder:"Max. price",data:{"flex-grow":"min"}}}]},FilterOrder}(Atoms.Molecule.Form),Atoms.Molecule.FormGroup=function(superClass){function FormGroup(){return FormGroup.__super__.constructor.apply(this,arguments)}return extend(FormGroup,superClass),FormGroup.prototype.onSave=function(){var field,form,i,j,key,len,len1,method,properties,ref,ref1,ref2,valid,value;for(this.trigger("progress",0),properties={},valid=!0,ref=this.children,i=0,len=ref.length;len>i;i++)if(form=ref[i],"Form"===form.constructor.base&&valid){for(ref1=form.children,j=0,len1=ref1.length;len1>j;j++)if(field=ref1[j],field.attributes.required&&""===field.value()){valid=!1,field.el.focus();break}ref2=form.value();for(key in ref2)value=ref2[key],properties[key]=value}return this.trigger("progress",20),valid?(method=this.entity?"PUT":"POST",__.proxy(method,this.attributes.endpoint,properties,!0).then(function(_this){return function(error,response){var ref3;return error?void 0:(null!=(ref3=__.Entity[_this.attributes.entity_name])&&ref3.createOrUpdate(response),_this.entity||(window.location="/admin/"+_this.attributes.endpoint+"/"+response.id),_this.trigger("progress",100))}}(this))):void 0},FormGroup.prototype.onRemove=function(){return __.proxy("DELETE",this.attributes.endpoint,{id:this.entity.id}).then(function(_this){return function(){return window.location="/admin/"+_this.attributes.endpoint+"s"}}(this))},FormGroup.prototype.fetch=function(entity1){var form,i,len,ref,ref1,ref2,ref3,ref4,ref5,ref6;for(this.entity=entity1,this.trigger("progress",10),ref=this.children,i=0,len=ref.length;len>i;i++)form=ref[i],"Form"===form.constructor.name&&form.clean();return null!=(ref1=this.images)&&ref1.value([]),null!=(ref2=this.search)&&ref2.clean(),null!=(ref3=this.address)&&ref3.clean(),null!=(ref4=this.networks)&&ref4.clean(),null!=(ref5=this.shipping)&&ref5.clean(),null!=(ref6=this.billing)&&ref6.clean(),this.el.find("[data-atom-button].cancel")[this.entity?"removeAttr":"attr"]("disabled",!0),this.el.find(".entity")[this.entity?"show":"hide"]()},FormGroup}(Atoms.Molecule.Div),Atoms.Molecule.Collection=function(superClass){function Collection(){return Collection.__super__.constructor.apply(this,arguments)}return extend(Collection,superClass),Collection["default"]=__.scaffold.form_collection,Collection.prototype.fetch=function(entity1){return this.entity=entity1,Collection.__super__.fetch.apply(this,arguments),this.entity?__.proxy("GET","collection",{id:this.entity},!0).then(function(_this){return function(error,collection){var form,i,len,ref;for(_this.trigger("progress",60),_this.entity=__.Entity.Collection.createOrUpdate(collection),_this.el.show(),ref=_this.children,i=0,len=ref.length;len>i;i++)form=ref[i],"Form"===form.constructor.name&&form.value(_this.entity);return _this.images.value(_this.entity),_this.search.value(_this.entity.search),Atoms.Url.path("admin/collection/"+_this.entity.id),_this.trigger("progress",100)}}(this)):(this.el.show(),this.trigger("progress",100))},Collection}(Atoms.Molecule.FormGroup),Atoms.Molecule.Customer=function(superClass){function Customer(){return Customer.__super__.constructor.apply(this,arguments)}return extend(Customer,superClass),Customer["default"]=__.scaffold.form_customer,Customer.prototype.fetch=function(entity1){return this.entity=entity1,Customer.__super__.fetch.apply(this,arguments),this.options.cancel.refresh({style:"cancel",text:"Deactivate",callbacks:["onRemove"],disabled:!1}),__.Entity.Customer.destroyAll(),this.entity?Hope.join([function(_this){return function(){return __.proxy("GET","customer",{id:_this.entity},!0)}}(this),function(_this){return function(){return __.proxy("GET","order",{user:_this.entity},!0)}}(this)]).then(function(_this){return function(errors,values){var form,i,j,len,len1,order,ref,ref1;for(_this.trigger("progress",60),_this.entity=__.Entity.Customer.createOrUpdate(values[0]),_this.entity.active===!1&&_this.options.cancel.refresh({style:"accept",text:"Activate",callbacks:["onActivate"]}),_this.el.show(),ref=_this.children,i=0,len=ref.length;len>i;i++)form=ref[i],"Form"===form.constructor.name&&form.value(_this.entity);for(ref1=values[1].orders,j=0,len1=ref1.length;len1>j;j++)order=ref1[j],__.Entity.Order.createOrUpdate(order);return Atoms.Url.path("admin/customer/"+_this.entity.id),_this.trigger("progress",100)}}(this)):(this.el.show(),this.trigger("progress",100))},Customer.prototype.onActivate=function(event){var parameters;return event.preventDefault(),parameters={id:this.entity.id,active:!0},this.trigger("progress",20),__.proxy("DELETE","customer",parameters,!0).then(function(_this){return function(error,response){return error?void 0:(window.location="/admin/customers",_this.trigger("progress",100))}}(this))},Customer}(Atoms.Molecule.FormGroup),Atoms.Molecule.Discount=function(superClass){function Discount(){return Discount.__super__.constructor.apply(this,arguments)}return extend(Discount,superClass),Discount["default"]=__.scaffold.form_discount,Discount.prototype.fetch=function(entity1){return this.entity=entity1,Discount.__super__.fetch.apply(this,arguments),__.proxy("GET","collection",null,!0).then(function(_this){return function(error,collections){var c,options;return _this.collections=collections,_this.trigger("progress",30),options=function(){var i,len,ref,results;for(ref=this.collections.collections,results=[],i=0,len=ref.length;len>i;i++)c=ref[i],results.push({label:c.title,value:c.id});return results}.call(_this),options.splice(0,0,{label:"Select...",value:0}),_this.general.collection.refresh({options:options}),_this.entity?__.proxy("GET","discount",{id:_this.entity},!0).then(function(error,product){var form,i,len,ref;for(_this.trigger("progress",60),_this.entity=__.Entity.Discount.createOrUpdate(product),_this.el.show(),ref=_this.children,i=0,len=ref.length;len>i;i++)form=ref[i],"Form"===form.constructor.name&&form.value(_this.entity);return Atoms.Url.path("admin/discount/"+_this.entity.id),_this.trigger("progress",100)}):(_this.el.show(),_this.trigger("progress",100))}}(this))},Discount}(Atoms.Molecule.FormGroup),Atoms.Molecule.Order=function(superClass){function Order(){return Order.__super__.constructor.apply(this,arguments)}return extend(Order,superClass),Order["default"]=__.scaffold.form_order,Order.prototype.fetch=function(entity1){return this.entity=entity1,Order.__super__.fetch.apply(this,arguments),__.Entity.OrderLine.destroyAll(),this.entity?__.proxy("GET","order",{id:this.entity},!0).then(function(_this){return function(error,order){var form,i,j,len,len1,line,ref,ref1;for(_this.trigger("progress",60),_this.entity=__.Entity.Order.createOrUpdate(order),_this.el.show(),ref=_this.children,i=0,len=ref.length;len>i;i++)form=ref[i],"Form"===form.constructor.name&&form.value(_this.entity);for(_this.shipping.value(_this.entity.shipping),_this.billing.value(_this.entity.billing),ref1=_this.entity.lines,j=0,len1=ref1.length;len1>j;j++)line=ref1[j],__.Entity.OrderLine.createOrUpdate(line);return Atoms.Url.path("admin/order/"+_this.entity.id),_this.trigger("progress",100)}}(this)):(this.el.show(),this.trigger("progress",100))},Order}(Atoms.Molecule.FormGroup),Atoms.Molecule.Page=function(superClass){function Page(){return Page.__super__.constructor.apply(this,arguments)}return extend(Page,superClass),Page["default"]=__.scaffold.form_page,Page.prototype.fetch=function(entity1){return this.entity=entity1,Page.__super__.fetch.apply(this,arguments),this.entity?__.proxy("GET","page",{id:this.entity},!0).then(function(_this){return function(error,product){var form,i,len,ref;for(_this.trigger("progress",60),_this.entity=__.Entity.Page.createOrUpdate(product),_this.el.show(),ref=_this.children,i=0,len=ref.length;len>i;i++)form=ref[i],"Form"===form.constructor.name&&form.value(_this.entity);return _this.search.value(_this.entity.search),Atoms.Url.path("admin/page/"+_this.entity.id),_this.trigger("progress",100)}}(this)):(this.el.show(),this.trigger("progress",100))},Page}(Atoms.Molecule.FormGroup),Atoms.Molecule.Payments=function(superClass){function Payments(){return Payments.__super__.constructor.apply(this,arguments)}return extend(Payments,superClass),Payments["default"]=__.scaffold.form_payments,Payments.prototype.onSave=function(){var field,form,i,j,len,len1,payments,properties,ref,ref1;for(payments={},ref=this.children,i=0,len=ref.length;len>i;i++)if(form=ref[i],"Form"===form.constructor.base&&form.attributes.id)for(payments[form.attributes.id]=form.value(),ref1=form.children,j=0,len1=ref1.length;len1>j;j++)if(field=ref1[j],field.attributes.required&&""===field.value()){field.el.focus(),delete payments[form.attributes.id];break}return null!=payments.stripe&&(payments.stripe.type=1),null!=payments.paypal&&(payments.paypal.type=2),properties={id:this.entity.id,payments:payments},__.proxy("PUT",this.attributes.endpoint,properties,!0).then(function(_this){return function(error,response){return error?void 0:_this.trigger("progress",100)}}(this))},Payments.prototype.fetch=function(){return Payments.__super__.fetch.apply(this,arguments),__.proxy("GET","settings",null,!0).then(function(_this){return function(error,entity1){var i,len,payment,ref,ref1,ref2,results;for(_this.entity=entity1,_this.trigger("progress",100),ref=["paypal","stripe","bank_transfer"],results=[],i=0,len=ref.length;len>i;i++)payment=ref[i],results.push(null!=(ref1=_this[payment])?ref1.value(null!=(ref2=_this.entity.payments)?ref2[payment]:void 0):void 0);return results}}(this))},Payments}(Atoms.Molecule.FormGroup),Atoms.Molecule.Product=function(superClass){function Product(){return Product.__super__.constructor.apply(this,arguments)}return extend(Product,superClass),Product["default"]=__.scaffold.form_product,Product.prototype.fetch=function(entity1){return this.entity=entity1,Product.__super__.fetch.apply(this,arguments),__.proxy("GET","collection",null,!0).then(function(_this){return function(error,collections){var c;return _this.collections=collections,_this.trigger("progress",30),_this.general.collection.refresh({options:function(){var i,len,ref,results;for(ref=this.collections.collections,results=[],i=0,len=ref.length;len>i;i++)c=ref[i],results.push({label:c.title,value:c.id});return results}.call(_this)}),_this.entity?__.proxy("GET","product",{id:_this.entity},!0).then(function(error,product){var form,i,j,key,len,len1,ref,ref1;for(_this.trigger("progress",60),_this.entity=__.Entity.Product.createOrUpdate(product),_this.el.show(),ref=["sizes","materials","colors","tags"],i=0,len=ref.length;len>i;i++)key=ref[i],_this.entity[key]=_this.entity[key].join(", ");for(_this.images.value(_this.entity),_this.search.value(_this.entity.search),ref1=_this.children,j=0,len1=ref1.length;len1>j;j++)form=ref1[j],"Form"===form.constructor.name&&form.value(_this.entity);return Atoms.Url.path("admin/product/"+_this.entity.id),_this.trigger("progress",100)}):(_this.el.show(),_this.trigger("progress",100))}}(this))},Product}(Atoms.Molecule.FormGroup),Atoms.Molecule.Review=function(superClass){function Review(){return Review.__super__.constructor.apply(this,arguments)}return extend(Review,superClass),Review["default"]=__.scaffold.form_review,Review.prototype.fetch=function(entity1){return this.entity=entity1,Review.__super__.fetch.apply(this,arguments),__.Entity.OrderLine.destroyAll(),this.entity?__.proxy("GET","review",{id:this.entity},!0).then(function(_this){return function(error,order){var form,i,len,ref;for(_this.trigger("progress",60),_this.entity=__.Entity.Review.createOrUpdate(order),_this.el.show(),ref=_this.children,i=0,len=ref.length;len>i;i++)form=ref[i],"Form"===form.constructor.name&&form.value(_this.entity);return Atoms.Url.path("admin/review/"+_this.entity.id),_this.trigger("progress",100)}}(this)):(this.el.show(),this.trigger("progress",100))},Review}(Atoms.Molecule.FormGroup),Atoms.Molecule.Settings=function(superClass){function Settings(){return Settings.__super__.constructor.apply(this,arguments)}return extend(Settings,superClass),Settings["default"]=__.scaffold.form_settings,Settings.prototype.fetch=function(){return Settings.__super__.fetch.apply(this,arguments),__.proxy("GET","settings",null,!0).then(function(_this){return function(error,entity1){var form,i,len,ref;for(_this.entity=entity1,_this.trigger("progress",100),ref=_this.children,i=0,len=ref.length;len>i;i++)form=ref[i],"Form"===form.constructor.name&&form.value(_this.entity);return _this.address.value(_this.entity.address),_this.networks.value(_this.entity.networks)}}(this))},Settings}(Atoms.Molecule.FormGroup),Atoms.Molecule.Form.available.push("Atom.Progress"),Atoms.Molecule.Form.available.push("Atom.Figure"),Atoms.Molecule.Form.available.push("Molecule.Div"),Atoms.Molecule.Images=function(superClass){function Images(){this.value=bind(this.value,this),Images.__super__.constructor.apply(this,arguments),this.attributes.files=[]}return extend(Images,superClass),Images.events=["add","destroy"],Images["default"]={entity:void 0,children:[{"Atom.Input":{id:"file",type:"file",events:["change"],callbacks:["onFileChange"]}},{"Molecule.Div":{id:"images"}},{"Atom.Figure":{id:"add",style:"add",events:["touch"],callbacks:["onAdd"]}},{"Atom.Progress":{id:"progress",style:"tiny",value:0}}]},Images.prototype.value=function(entity1){var file,i,len,ref,results;if(this.entity=entity1,null!=this.entity){for(this.attributes.files=[],this.images.destroyChildren(),ref=this.entity.images||[],results=[],i=0,len=ref.length;len>i;i++)file=ref[i],results.push(this._addImage(file));return results}return this.attributes.files},Images.prototype.onAdd=function(event){return this.file.el.trigger("click"),!1},Images.prototype.onDestroy=function(event,atom){var background,parameters;return this.progress.value(0),parameters={file:atom.attributes.file,id:this.entity.id,entity:this.entity.constructor.name},this.progress.value(50),__.proxy("DELETE","image",parameters,background=!0).then(function(_this){return function(error,response){return _this.progress.el.hide(),_this.progress.value(0),error?void 0:(atom.destroy(),_this.attributes.files.splice(_this.attributes.files.indexOf(atom.attributes.file),1))}}(this)),!1},Images.prototype.onFileChange=function(event){var callbacks,file_url,parameters;return event.stopPropagation(),event.preventDefault(),file_url=event.target.files[0],file_url.type.match(/image.*/)&&(this.progress.value(0),this.progress.el.show(),callbacks={progress:function(_this){return function(progress){return _this.progress.value(progress.position/progress.total*100)}}(this),error:function(_this){return function(){return alert("upload error!!")}}(this),abort:function(_this){return function(){return alert("upload aborted")}}(this)},parameters={file:file_url,id:this.entity.id,entity:this.entity.constructor.name},this.progress.value(50),__.multipart("POST","/api/image",parameters,callbacks).then(function(_this){return function(error,file){return _this.progress.el.hide(),_this.progress.value(0),error?void 0:_this._addImage(file.name)}}(this))),!1},Images.prototype._addImage=function(file){return this.attributes.files.push(file),this.images.appendChild("Atom.Figure",{url:__.host+"uploads/"+file,file:file,events:["touch"],callbacks:["onDestroy"]})},Images}(Atoms.Molecule.Form),Atoms.Molecule.Networks=function(superClass){function Networks(){return Networks.__super__.constructor.apply(this,arguments)}return extend(Networks,superClass),Networks["extends"]=!0,Networks["default"]={children:[{"Atom.Label":{style:"half",value:"Facebook"}},{"Atom.Label":{style:"half",value:"Twitter"}},{"Atom.Input":{style:"half",name:"facebook"}},{"Atom.Input":{style:"half",name:"twitter"}},{"Atom.Label":{style:"half",value:"Pinterest"}},{"Atom.Label":{style:"half",value:"Instagram"}},{"Atom.Input":{style:"half",name:"pinterest"}},{"Atom.Input":{style:"half",name:"instagram"}}]},Networks.prototype.value=function(values){var result;return values=Networks.__super__.value.call(this,values),result={},result[this.attributes.id]=values,result},Networks}(Atoms.Molecule.Form),Atoms.Molecule.SearchEngine=function(superClass){function SearchEngine(){return SearchEngine.__super__.constructor.apply(this,arguments)}return extend(SearchEngine,superClass),SearchEngine["extends"]=!0,SearchEngine["default"]={children:[{"Atom.Label":{value:"Page title"}},{"Atom.Input":{name:"page_title",placeholder:"less than 70 characters",maxlength:70}},{"Atom.Label":{value:"Meta Description"}},{"Atom.Textarea":{name:"meta_description",placeholder:"less than 160 characters",maxlength:160}},{"Atom.Label":{value:"URL handle"}},{"Atom.Input":{name:"url_handle",placeholder:"less than 20 characters"}},{"Atom.Label":{style:"tip",value:"Is a specific endpoint for the current category."}}]},SearchEngine.prototype.value=function(values){var result;return values=SearchEngine.__super__.value.call(this,values),result={},result[this.attributes.id]=values,result},SearchEngine}(Atoms.Molecule.Form),Atoms.Organism.Header.available.push("Atom.Link"),Atoms.Organism.Content=function(superClass){function Content(){this.progress=bind(this.progress,this),this.context=bind(this.context,this),this.onDiscount=bind(this.onDiscount,this),this.onPage=bind(this.onPage,this),this.onReview=bind(this.onReview,this),this.onProduct=bind(this.onProduct,this),this.onCustomer=bind(this.onCustomer,this),this.onOrder=bind(this.onOrder,this);var formgroup,i,len,ref,url;for(Content.__super__.constructor.apply(this,arguments),this.render(),this.hideHeaderButtons(),this.header.navigation.el.children().hide(),url=Atoms.Url.path().split("/"),3===url.length?this.context(url[2]):this[url[2]](url[3]),ref=["order","customer","collection","product","review","page","settings","payments"],i=0,len=ref.length;len>i;i++)formgroup=ref[i],this.section[formgroup].bind("progress",this.progress)}return extend(Content,superClass),Content.url="/assets/core/scaffold/admin/organism/article.content.json",Content.prototype.onButton=function(event,atom){return this[atom.attributes.callback]()},Content.prototype.onOrder=function(atom){return this.order(atom.entity.id)},Content.prototype.onCustomer=function(atom){return this.customer(atom.entity.id)},Content.prototype.onCollection=function(atom){return this.collection(atom.entity.id)},Content.prototype.onProduct=function(atom){return this.product(atom.entity.id)},Content.prototype.onReview=function(atom){return this.review(atom.entity.id)},Content.prototype.onPage=function(atom){return this.page(atom.entity.id)},Content.prototype.onDiscount=function(atom){return this.discount(atom.entity.id)},Content.prototype.onFilterChange=function(event,form){var filter;return filter=form.value(),this.section.products.select(function(item){var ref,ref1,valid;return valid=!0,filter.title&&-1===(null!=(ref=item.title)?ref.toLowerCase().indexOf(filter.title.toLowerCase()):void 0)&&(valid=!1),filter.description&&-1===(null!=(ref1=item.description)?ref1.toLowerCase().indexOf(filter.description.toLowerCase()):void 0)&&(valid=!1),filter.min&&parseInt(item.price)<parseInt(filter.min)&&(valid=!1),filter.max&&parseInt(item.price)>parseInt(filter.max)&&(valid=!1),valid?item:void 0})},Content.prototype.onFilterOrderChange=function(event,form){var filter;return filter=form.value(),this.section.orders.select(function(item){var ref,ref1,valid;return valid=!0,filter.id&&-1===(null!=(ref=item.id)?ref.toLowerCase().indexOf(filter.id.toLowerCase()):void 0)&&(valid=!1),filter.state&&item.state.toString()!==filter.state.toString()&&(valid=!1),filter.tracking&&-1===(null!=(ref1=item.tracking_number)?ref1.toLowerCase().indexOf(filter.tracking.toLowerCase()):void 0)&&(valid=!1),filter.min&&parseInt(item.amount)<parseInt(filter.min)&&(valid=!1),filter.max&&parseInt(item.amount)>parseInt(filter.max)&&(valid=!1),valid?item:void 0})},Content.prototype.context=function(id){var button,i,len,ref,ref1;for(this.header.progress.value(0),this.header.ok.el.removeClass("active"),this.header.ok.el.hide(),this.header.title.refresh({text:id,href:"/admin/"+id}),this.header.subtitle.refresh({value:null}),ref=this.header.navigation.children,i=0,len=ref.length;len>i;i++)button=ref[i],button.el[button.attributes.context===id?"show":"hide"]();return this.header.progress.value(20),this.section[id].el.show().siblings().hide(),"collections"===id&&this.fetch(id,"Collection"),"customers"===id&&this.fetch(id,"Customer"),"discounts"===id&&this.fetch(id,"Discount"),"orders"===id&&this.fetch(id,"Order"),"pages"===id&&this.fetch(id,"Page"),"products"===id&&this.fetch(id,"Product"),"reviews"===id&&this.fetch(id,"Review"),"settings"===id&&this.section.settings.fetch(),"payments"===id&&this.section.payments.fetch(),null!=(ref1=this.section[id+"_filter"])?ref1.el.show():void 0},Content.prototype.fetch=function(id,entity){return __.Entity[entity].destroyAll(),__.proxy("GET",entity.toLowerCase(),null,!0).then(function(_this){return function(error,response){var i,item,len,ref;for(_this.header.progress.value(80),ref=response[id],i=0,len=ref.length;len>i;i++)item=ref[i],__.Entity[entity].createOrUpdate(item);return _this.header.progress.value(100),setTimeout(function(){return _this.header.progress.refresh({value:0})},500)}}(this))},Content.prototype.collection=function(id){return this.showGroupForm(id,"Collections","collection")},Content.prototype.customer=function(id){return this.showGroupForm(id,"Customers","customer")},Content.prototype.order=function(id){return this.showGroupForm(id,"Orders","order")},Content.prototype.product=function(id){return this.showGroupForm(id,"Products","product")},Content.prototype.review=function(id){return this.showGroupForm(id,"Reviews","review")},Content.prototype.discount=function(id){return this.showGroupForm(id,"Discounts","discount")},Content.prototype.page=function(id){return this.showGroupForm(id,"Pages","page")},Content.prototype.showGroupForm=function(id,title,form){return this.header.title.refresh({text:title,href:"/admin/"+title.toLowerCase()}),this.header.subtitle.refresh({value:"/ "+(id?"edit":"new")}),this.hideHeaderButtons(),this.section.el.children().hide(),this.section[form].fetch(id)},Content.prototype.hideHeaderButtons=function(){return this.header.navigation.el.children().hide()},Content.prototype.progress=function(value){return this.header.progress.value(value),100===value?(this.header.ok.el.addClass("active"),setTimeout(function(_this){return function(){return _this.header.progress.refresh({value:0}),_this.header.ok.el.removeClass("active")}}(this),500)):void 0},Content}(Atoms.Organism.Article),Atoms.Organism.Menu=function(superClass){function Menu(){Menu.__super__.constructor.apply(this,arguments),this.render(),this.activeItem(Atoms.Url.path().split("/").slice(-1)[0])}return extend(Menu,superClass),Menu.url="/assets/core/scaffold/admin/organism/aside.menu.json",Menu.prototype.onOption=function(event,atom){var id;
return this.activeItem(id=atom.attributes.text),Atoms.Url.path("admin/"+id),__.Article.Content.context(id),!1},Menu.prototype.onProfile=function(){return __.Dialog.Profile.show(),!1},Menu.prototype.activeItem=function(id){var i,len,link,navigation,ref,results;for(ref=this.section.children,results=[],i=0,len=ref.length;len>i;i++)navigation=ref[i],results.push(function(){var j,len1,ref1,results1;for(ref1=navigation.children,results1=[],j=0,len1=ref1.length;len1>j;j++)link=ref1[j],results1.push(link.el[link.attributes.text===id?"addClass":"removeClass"]("active"));return results1}());return results},Menu}(Atoms.Organism.Aside),Atoms.Organism.Profile=function(superClass){function Profile(){return this.onSave=bind(this.onSave,this),this.onFileChange=bind(this.onFileChange,this),this.onChangeAvatar=bind(this.onChangeAvatar,this),Profile.__super__.constructor.apply(this,arguments)}return extend(Profile,superClass),Profile.url="/assets/core/scaffold/admin/organism/dialog.profile.json",Profile.prototype.show=function(){return __.proxy("GET","profile").then(function(_this){return function(error,entity1){return _this.entity=entity1,_this.section.form.value(_this.entity),_this.section.form.avatar.refresh({url:"/uploads/"+_this.entity.avatar}),Profile.__super__.show.apply(_this,arguments)}}(this))},Profile.prototype.onClose=function(){return this.hide(),!1},Profile.prototype.onChangeAvatar=function(){return this.section.form.file.el.trigger("click"),!1},Profile.prototype.onFileChange=function(event){var file_url,parameters;return event.stopPropagation(),event.preventDefault(),file_url=event.target.files[0],this.section.form.avatar.refresh({url:"http://"}),file_url.type.match(/image.*/)?(parameters={file:file_url,id:this.entity.id,entity:"User"},__.multipart("POST","/api/image",parameters).then(function(_this){return function(error,file){return _this.section.form.avatar.refresh({url:"/uploads/"+file.name}),_this.entity.avatar=file.name,__.Aside.Menu.header.profile.refresh(_this.entity)}}(this))):void 0},Profile.prototype.onLogout=function(){return window.location="/admin/logout"},Profile.prototype.onSave=function(){var parameters;return parameters=this.section.form.value(),__.proxy("PUT","profile",parameters).then(function(_this){return function(error,entity1){return _this.entity=entity1,_this.hide(),__.Aside.Menu.header.profile.refresh(_this.entity)}}(this))},Profile}(Atoms.Organism.Dialog),Atoms.Organism.Session=function(superClass){function Session(){return Session.__super__.constructor.apply(this,arguments)}return extend(Session,superClass),Session.url="/assets/core/scaffold/common/organism/dialog.session.json",Session.prototype.render=function(){return Session.__super__.render.apply(this,arguments),this.admin_mode="/admin"===Atoms.Url.path()},Session.prototype.login=function(){var active,disable;return this._context(active="login",disable="signup"),this.show()},Session.prototype.signup=function(){var active,disable;return this._context(active="signup",disable="login"),this.show()},Session.prototype.onFormChange=function(event,form){var key,ref,required,valid,value;this.section.error.el.hide(),required=["mail","password"],valid=!0,ref=form.value();for(key in ref)value=ref[key],indexOf.call(required,key)>=0&&""===value&&(valid=!1);return this._footerActive(valid)},Session.prototype.onSubmit=function(event,button){var api;return this._disableForm(),api=button.attributes.api,__.proxy("POST",api,this.section.form.value()).then(function(_this){return function(error,response){return _this._enableForm(),null!=(null!=response?response.id:void 0)?_this.admin_mode?window.location="/admin/dashboard":window.location.reload():_this.section.error.el.html(error.message).show()}}(this))},Session.prototype.onContext=function(event,atom){return this[atom.attributes.context]()},Session.prototype.onClose=function(){return this.hide(),!1},Session.prototype._context=function(active,disable){return this.section.form.clean(),this.section.error.el.hide(),this.el.find("."+disable+"-context").hide(),this.el.find("."+active+"-context").show(),this._footerActive(!1),this.footer.navigation.submit.refresh({api:active,text:active}),setTimeout(function(_this){return function(){return _this.section.form.el.children().first().focus()}}(this),350)},Session.prototype._disableForm=function(){return this.section.form.el.children().attr("disabled",!0)},Session.prototype._enableForm=function(){return this.section.form.el.children().removeAttr("disabled").removeClass("loading")},Session.prototype._footerActive=function(value){return value?(this.footer.el.removeClass("disabled"),this.footer.navigation.el.children().removeAttr("disabled")):(this.footer.el.addClass("disabled"),this.footer.navigation.el.children().attr("disabled",!0))},Session}(Atoms.Organism.Dialog),Atoms.Molecule.Address=function(superClass){function Address(attributes){var child,i,len,ref,value;if(attributes.required||attributes.disabled)for(attributes.events=["change"],attributes.callbacks=["onAddressChange"],ref=this.constructor["default"].children,value=i=0,len=ref.length;len>i;value=++i)child=ref[value],child["Atom.Input"]&&(child["Atom.Input"].events=["keyup"],attributes.disabled&&(child["Atom.Input"].disabled=attributes.disabled));Address.__super__.constructor.call(this,attributes),this.children[0].el.html(""+this.attributes.title)}return extend(Address,superClass),Address["extends"]=!0,Address["default"]={children:[{"Atom.Label":{value:"Contact"}},{"Atom.Input":{name:"contact"}},{"Atom.Label":{value:"Street"}},{"Atom.Input":{name:"address"}},{"Atom.Label":{style:"half",value:"City"}},{"Atom.Label":{style:"half",value:"Postal / ZIP Code"}},{"Atom.Input":{style:"half",name:"city"}},{"Atom.Input":{style:"half",name:"zip_code"}},{"Atom.Label":{style:"half",value:"Country"}},{"Atom.Label":{style:"half",value:"Phone"}},{"Atom.Input":{style:"half",name:"country"}},{"Atom.Input":{style:"half",name:"tel"}}]},Address.prototype.value=function(values){var result;return values=Address.__super__.value.call(this,values),result={},result[this.attributes.id]=values,result},Address}(Atoms.Molecule.Form)}).call(this);